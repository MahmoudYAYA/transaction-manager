{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahmo/Desktop/IIA/BTS-2025-2026/JS/Online_tuto/full_stack/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport toast from \"react-hot-toast\";\nimport api from \"./api\";\nimport { useEffect, useState } from \"react\";\nimport { Wallet } from \"lucide-react\";\n\ntype Transaction = {\n  id: string;\n  text: string;\n  amount: number;\n  created_at: string;\n};\n\nexport default function Home() {\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\n\n  const getTransactions = async () => {\n    try {\n      const res = await api.get<Transaction[]>(\"transactions/\");\n      setTransactions(res.data);\n      toast.success(\"transactions chargées\");\n    } catch (error) {\n      console.error(\"erreur lors de chargement de transaction\", error);\n      toast.error(\"Erreur lors de chargement\");\n    }\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await getTransactions();\n    };\n\n    fetchData();\n  }, []);\n\n  // on converti en number de chaque transaction\n  const amounts = transactions.map((t) => Number(t.amount) || 0);\n  const balance = amounts.reduce((acc, item) => acc + item, 0) || 0; // SI Y A PAS DES TRANSACTIONS ON LE MIS à 0 ;\n  const income =\n    amounts.filter((a) => a > 0).reduce((acc, item) => acc + item, 0) || 0;\n  const expense =\n    amounts.filter((a) => a < 0).reduce((acc, item) => acc + item, 0) || 0;\n  const ration =\n    income > 0 ? Math.min((Math.abs(expense) / income) * 100, 100) : 0;\n\n  const formatDate = (dateString: string) => {\n    const d = new Date(dateString);\n\n    return d.toLocaleDateString(\"fr-FR\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  return (\n    <div className=\"w-2/3 flex flex-column gap-4\">\n      <div className=\"flex justify-between rounded-2xl border-warning/10 border-dashed bg-warning/5 p-5\">\n        <div className=\"flex flex-column gap-1\">\n          <div>\n            <div>\n              {\" \"}\n              <Wallet className=\"w-4 h4\" />{\" \"}\n            </div>\n          </div>\n          <div className=\"stat-value\">{balance.toFixed(2)} €</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";AACA,OAAO,WAAW,kBAAkB;AACpC,OAAO,SAAS,QAAQ;AACxB,SAAS,SAAS,EAAE,QAAQ,QAAQ,QAAQ;AAC5C,SAAS,MAAM,QAAQ,eAAe;AAStC,eAAe,SAAS;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,SAAwB,EAAE;IAElE,MAAM,kBAAkB;QACtB,IAAI;YACF,MAAM,MAAM,MAAM,IAAI,GAAG,CAAgB;YACzC,gBAAgB,IAAI,IAAI;YACxB,MAAM,OAAO,CAAC;QAChB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4CAA4C;YAC1D,MAAM,KAAK,CAAC;QACd;IACF;IAEA,UAAU;QACR,MAAM,YAAY;YAChB,MAAM;QACR;QAEA;IACF,GAAG,EAAE;IAEL,8CAA8C;IAC9C,MAAM,UAAU,aAAa,GAAG,CAAC,CAAC,IAAM,OAAO,EAAE,MAAM,KAAK;IAC5D,MAAM,UAAU,QAAQ,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,MAAM,MAAM,GAAG,8CAA8C;IACjH,MAAM,SACJ,QAAQ,MAAM,CAAC,CAAC,IAAM,IAAI,GAAG,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,MAAM,MAAM;IACvE,MAAM,UACJ,QAAQ,MAAM,CAAC,CAAC,IAAM,IAAI,GAAG,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,MAAM,MAAM;IACvE,MAAM,SACJ,SAAS,IAAI,KAAK,GAAG,CAAC,AAAC,KAAK,GAAG,CAAC,WAAW,SAAU,KAAK,OAAO;IAEnE,MAAM,aAAa,CAAC;QAClB,MAAM,IAAI,IAAI,KAAK;QAEnB,OAAO,EAAE,kBAAkB,CAAC,SAAS;YACnC,MAAM;YACN,OAAO;YACP,KAAK;YACL,MAAM;YACN,QAAQ;QACV;IACF;IAEA,qBACE,QAAC;QAAI,WAAU;kBACb,cAAA,QAAC;YAAI,WAAU;sBACb,cAAA,QAAC;gBAAI,WAAU;;kCACb,QAAC;kCACC,cAAA,QAAC;;gCACE;8CACD,QAAC;oCAAO,WAAU;;;;;;gCAAY;;;;;;;;;;;;kCAGlC,QAAC;wBAAI,WAAU;;4BAAc,QAAQ,OAAO,CAAC;4BAAG;;;;;;;;;;;;;;;;;;;;;;;AAK1D"}}]
}